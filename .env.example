# =============================================================================
# PRACTICAL DEFENSE — Environment Variables Reference
# Copy this file to .env and fill in values for local development.
# =============================================================================

# ============================================
# REQUIRED — Server will not start without these
# ============================================

# PostgreSQL database connection URL (pooled — for serverless/runtime queries)
# For local dev: postgresql://user:password@localhost:5432/practicaldefense
# For Neon (serverless): use the pooled connection string (hostname contains '-pooler')
DATABASE_URL=postgresql://user:password@localhost:5432/practicaldefense

# PostgreSQL direct connection URL (non-pooled — for Drizzle migrations)
# For Neon: use the direct connection string (no '-pooler' in hostname)
# Get from: Neon Console -> Connection Details -> Direct connection string
# Used by: npx drizzle-kit push / migrate (not used at runtime)
DATABASE_URL_DIRECT=postgresql://user:password@ep-xxx.us-east-2.aws.neon.tech/dbname

# Secret key for Express session cookies (any long random string)
# Generate: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
SESSION_SECRET=your-long-random-secret-here

# Full public URL of this deployment (no trailing slash)
# Used in: email links, SMS URLs, calendar webhook callbacks, payment links
# Local dev: http://localhost:5000
# Production: https://your-domain.vercel.app
APP_URL=http://localhost:5000

# Vercel Blob read-write token for file storage
# Get from: Vercel Dashboard -> Storage -> Blob -> your store -> Tokens tab
BLOB_READ_WRITE_TOKEN=vercel_blob_rw_...

# ============================================
# PAYMENTS — Required for payment processing
# ============================================

# Stripe secret key (server-side)
# Get from: Stripe Dashboard -> Developers -> API keys
STRIPE_SECRET_KEY=sk_test_...

# Stripe webhook secret for verifying online course webhook events
# Get from: Stripe Dashboard -> Developers -> Webhooks -> your endpoint -> Signing secret
STRIPE_ONLINE_COURSE_WEBHOOK_SECRET=whsec_...

# ============================================
# CLIENT-SIDE — Build-time env vars (VITE_ prefix)
# ============================================

# Stripe publishable key (client-side, safe to expose)
# Get from: Stripe Dashboard -> Developers -> API keys
VITE_STRIPE_PUBLIC_KEY=pk_test_...

# ============================================
# EMAIL — Required for email sending
# ============================================

# SendGrid API key
# Get from: SendGrid Dashboard -> Settings -> API Keys
SENDGRID_API_KEY=SG....

# Sender email address (must be verified in SendGrid)
FROM_EMAIL=noreply@yourdomain.com

# ============================================
# SMS — Required for SMS notifications
# ============================================

# Twilio credentials
# Get from: Twilio Console -> Account Info
TWILIO_ACCOUNT_SID=AC...
TWILIO_AUTH_TOKEN=...
TWILIO_PHONE_NUMBER=+1...

# ============================================
# GOOGLE CALENDAR — Required for calendar sync
# ============================================

# Google OAuth app credentials
# Get from: Google Cloud Console -> APIs & Services -> Credentials
GOOGLE_CLIENT_ID=...apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-...

# ============================================
# MOODLE — Required for online course enrollment
# ============================================

MOODLE_URL=https://your-moodle-instance.com
MOODLE_TOKEN=your_moodle_api_token

# ============================================
# OPTIONAL
# ============================================

# Server port (default: 5000)
PORT=5000

# Node environment (development | production)
NODE_ENV=development
